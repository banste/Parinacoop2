<div class="reset-password" style="max-width:420px;margin:48px auto;padding:0 16px;">
  <h2 style="margin-bottom:16px;">Restablecer contraseña</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
    <!-- RUN -->
    <div style="margin-bottom:12px;">
      <label style="display:block;font-size:12px;color:#666;margin-bottom:6px;">RUN</label>
      <input formControlName="run" placeholder="Ej: 8271125" style="width:100%;padding:10px;border:1px solid #e0e0e0;border-radius:4px" />
      <div *ngIf="fc('run').invalid && fc('run').touched" style="color:#d32f2f;font-size:12px;margin-top:6px;">
        Ingrese RUN válido
      </div>
    </div>

    <!-- token (oculto/pero editable) -->
    <div style="margin-bottom:12px;">
      <label style="display:block;font-size:12px;color:#666;margin-bottom:6px;">Código (del correo)</label>
      <input formControlName="token" placeholder="Código recibido por correo" style="width:100%;padding:10px;border:1px solid #e0e0e0;border-radius:4px" />
      <div *ngIf="fc('token').invalid && fc('token').touched" style="color:#d32f2f;font-size:12px;margin-top:6px;">
        Código requerido
      </div>
    </div>

    <div style="margin-bottom:12px;">
      <label style="display:block;font-size:12px;color:#666;margin-bottom:6px;">Nueva contraseña</label>
      <input type="password" formControlName="newPassword" placeholder="Nueva contraseña" style="width:100%;padding:10px;border:1px solid #e0e0e0;border-radius:4px" />
    </div>

    <div style="margin-bottom:12px;">
      <label style="display:block;font-size:12px;color:#666;margin-bottom:6px;">Confirmar contraseña</label>
      <input type="password" formControlName="confirmPassword" placeholder="Repetir contraseña" style="width:100%;padding:10px;border:1px solid #e0e0e0;border-radius:4px" />
      <div *ngIf="form.hasError('notSame')" style="color:#d32f2f;font-size:12px;margin-top:6px;">Las contraseñas no coinciden</div>
    </div>

    <div style="margin-top:8px;">
      <button type="submit" [disabled]="form.invalid || isSubmitting"
        style="background:#d9534f;color:#fff;padding:10px 16px;border:none;border-radius:4px;cursor:pointer;">
        <ng-container *ngIf="!isSubmitting">Cambiar contraseña</ng-container>
        <ng-container *ngIf="isSubmitting"><app-spinner></app-spinner> Procesando...</ng-container>
      </button>
    </div>

    <div *ngIf="message" style="margin-top:12px;color:#2e7d32">{{ message }}</div>
    <div *ngIf="error" style="margin-top:12px;color:#d32f2f">{{ error }}</div>
  </form>
</div>